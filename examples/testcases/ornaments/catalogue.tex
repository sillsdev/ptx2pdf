\def\pluginlist{ornaments}
\input "paratext2.tex"
\catcode`\@=11
\def\v@rbatim#1"{#1\egroup}
\def\"{\bgroup\tt\catcode`\\=11 \v@rbatim}
\pluginjustwarntrue
%\addtoversehooks{\ifx\prev@rsemode\empty \endash\penalty5 \fi}
%\input "ptx-extended.tex"
%\input "ptxplus-marginalverses.tex"
\showboxdepth=99\showboxbreadth=99
\tracingstats=1
\OmitVerseNumberOnetrue
\def\ChapterVerseSeparator{\kern.1em:\kern.1em}
\def\AfterVerseSpaceFactor{2}
\def\AfterChapterSpaceFactor{3}
% CROSSREFERENCES
\AutoCallers{x}{}
\ParagraphedNotes{x}

% FOOTNOTES
\ParagraphedNotes{f}
\def\footnoterule{\hrule height 0.5pt\smallskip}

% FONTSETTINGS
\FontSizeUnit=0.833pt
\def\LineSpacingFactor{1.0}
\def\VerticalSpaceFactor{1}

% HEADERFOOTER
\def\HeaderPosition{0.33}
\def\FooterPosition{0.5}

% FOOTERCONTENT
\def\RFtitleleft{\empty}
\def\RFtitlecenter{\empty}
\def\RFtitleright{\empty}
\def\RFoddleft{\empty}
\def\RFoddcenter{\empty}
\def\RFoddright{\empty}
\def\RFevenleft{\empty}
\def\RFevencenter{\empty}
\def\RFevenright{\empty}

% HEADERCONTENT
\VerseRefstrue
\def\RHtitleleft{\empty}
\def\RHtitlecenter{\empty}
\def\RHtitleright{\empty}
\def\RHoddleft{\firstref}
\def\RHoddcenter{\pagenumber}
\def\RHoddright{\lastref}
\def\RHevenleft{\firstref}
\def\RHevencenter{\pagenumber}
\def\RHevenright{\empty}

% HYPHENATION
\hyphenpenalty=10000

% ILLUSTRATIONS
%\FigurePlaceholderstrue
%\PicPath={/home/dennis/Publishing/testArea/ENG-LATN-JAS/Illustration/}

% MARGINS
\MarginUnit=15.0mm
\def\TopMarginFactor{1.0}
\def\BottomMarginFactor{0.67}
\def\SideMarginFactor{0.67}

% PAGELAYOUT
\PaperWidth=297mm
\PaperHeight=210mm

% TEXTELEMENTS
\expandafter\ifx\csname quotekernamount\endcsname\relax\else
\quotekernamount=0.1em
\fi
% TEXBEHAVIOR
\hfuzz=0.1pt
\vfuzz=0.1pt

% INSTALLED FONTS
\def\regular{"Charis SIL"}
\def\bold{"Charis SIL/B"}
\def\italic{"Charis SIL/I"}
\def\bolditalic{"Charis SIL/BI"}
\font\charissilregular = "Charis SIL" at 12pt
\font\charissilbold = "Charis SIL/B" at 12pt
\font\charissilbolditalic = "Charis SIL/BI" at 12pt
\font\charissilitalic = "Charis SIL/I" at 12pt

% COLUMNS
\BodyColumns=2
\def\ColumnGutterFactor{15}
\iftrue
  \def\paperY{21cm}
  \def\paperX{29.69cm}
  \dimen1=10cm % Sample height
  \dimen2=29.69cm % orig height
  \edef\SampleY{\the\dimen1}
  \edef\SampleX{\the\dimexpr 0.707\dimen1\relax}
\else
  \def\paperX{21cm}
  \def\paperY{29.69cm}
  \dimen1=10cm % Sample height
  \dimen2=29.69cm % orig height
  \edef\SampleY{\the\dimen1}
  \edef\SampleX{\the\dimexpr 0.707\dimen1\relax}
\fi
\x@\edef\csname scalefrm@a5\endcsname{\strip@pt{\dimexpr (32\dimen1/\dimexpr 0.707\dimen2/2048\relax)\relax}}
\x@\edef\csname scalefrm@a4\endcsname{\strip@pt{\dimexpr (32\dimen1/\dimexpr \dimen2/2048\relax)\relax}}
\def\scale@borderwidth{1}
\def\scale@borderhpadding{1}
\def\scale@bordervpadding{1}
\def\scale@boxhpadding{1}
\def\scale@boxvpadding{1}

\def\modcat #1|#2 {\def\d@##1\E{%
  \getp@r@m{##1}{bdr-#1}\ifx\p@ram\relax\else
    %\message{Copying ##1 from #1 to testpage}%
    \ifcsname scale@##1\endcsname
      \dimen1=\p@ram pt 
      \setp@ram{##1}{cat:testpage|\sb@rmarker}{\strip@pt{\dimexpr \csname scalefrm@#2\endcsname\dimen1\relax}}%
    \else
      \setp@ram{##1}{cat:testpage|\sb@rmarker}{\p@ram}%
    \fi\fi}\x@\cstackdown\b@rderparameters,\E
}
\edef\bksl{\char"5C}
\def\demoborder #1|#2 #3\E{%
  \boxornfalse
  \leavevmode
  \traceifset{demob}%
  \bgroup\PaperHeight=\SampleY \PaperWidth=\SampleX 
    \widowpenalty=10
    \clubpenalty=10
    \modcat #1|#2 
    \esb\cat testpage\cat* 
    \vfill \pc #1 on #2 \pc #3 \vfill 
    \esbe\leavevmode 
    \hbox{\box\wholepagepic} %
  \egroup 
  \traceifcheck{demob}%
  \lineskip=10pt
}

\tracingstats=1
\catcode`\@=12
\stylesheet{usfm_sb.sty}
\stylesheet{ptx2pdf.sty}
\stylesheet{standardborders.sty}
\stylesheet{default-custom.sty}
\tracing{sc}
%\tracing{sC}
\stylesheet{test.sty}
\stylesheet{catalogue.sty}
%\tracing{C}
\tracing{e}
\tracing{A}
\tracing{m}
\tracing{eb}
\tracing{ebi}
%\tracing{s}
%\tracing{sP}
\tracing{g}
\tracing{h}
\tracing{V}
\tracing{I}
%\tracingmacros=1
\categorysheet{mycats.sty}
%\def\doLines{\doGridLines}
%\unbalancedfalse
\unbalancedtrue
%\dimen\toprightins=13cm
%\StyleCategory{People}{
% \stylesheet{default-custom.sty}
% \stylesheet{usfm.sty}
%}
% Set added material in desired form
\def\addmtlquteht{2pt}
\def\addmtlqutewd{1.5pt}
\def\addmtlqutelw{0.2pt}
\def\beginadd{\lower 1pt \hbox{\vrule width \addmtlqutelw height \addmtlquteht\vrule width \addmtlqutewd height \addmtlqutelw}\kern -1pt}
\def\endadd{\kern -1pt \lower 1pt \hbox{\vrule width \addmtlqutewd height \addmtlqutelw\vrule width \addmtlqutelw height \addmtlquteht}}
\def\RHoddcenter{\timestamp}
\def\RHoddleft{\isodate}
%\sethook{before}{m}{\dimen1=\prevdepth\message{TEST: \the\dimen1}\kern-\dimen1\vbox to 0pt{\vskip 0.5pt\hrule width 10em height 0.0pt depth 0.5pt}\vskip 0pt}
%\sethook{after}{m}{\kern .5pt \hrule width 10em height .2pt \kern 1pt \hrule width 10em height .2pt}
%\sethook{start}{m}{\beginadd\beginadd}
%\sethook{end}{m}{\endadd\endadd}
\sethook{before}{add}{|}
\sethook{after}{add}{|}
\sethook{start}{add}{\beginadd}
\sethook{end}{add}{\endadd}
\sethook{start}{cat:foo|cat}{}
\sethook{end}{cat:foo|cat}{foo_hook>>}
\csname ColorFontstrue\endcsname
%\tracinggroups=1
%\setcvhook{TST1.15}{\message{HERE}\global\tracingparagraphs=1}
\boxorntrue
%\nonstopmode
\def\testornamentsv{
  \SwitchOrnamentsFamily{vectorian}%
\xdef\ornamentheight{20pt}\xdef\ornamentwidth{}\xdef\ornamentmaxwidth{\the\dimexpr 0.9\hsize\relax}
\lineskip 1em
\count255=-3
\ornscaletrue
\def\max{196}
\ornloop
}
\def\bigorn#1#2{\expandafter\def\csname orn@big#1#2\endcsname{1}}
\bigorn{49}{pgfhan}
\bigorn{50}{pgfhan}
\bigorn{51}{pgfhan}
\bigorn{52}{pgfhan}
\bigorn{53}{pgfhan}
\bigorn{54}{pgfhan}
\SetupOrnament{0.1}{0.0 0.5 0.0}{0.9 0.8 0.0}
\def\typeout#1{}
\def\SwitchToHan{\message{switchtohan}\SwitchOrnamentsFamily{pgfhan}}
\def\testornamentsh{
  \xdef\ornamentheight{20pt}\xdef\ornamentwidth{}\xdef\ornamentmaxwidth{\the\dimexpr 0.8\hsize\relax}
  \SetupOrnament{0.1}{1.0 0.0 0.0}{0.9 0.8 0.0}
  \SwitchOrnamentsFamily{pgfhan}
  \catcode`\#=6 \catcode`\%=14
  %\includeifpresent{\pgfOrnamentsObject}
  \count255=1
  \ornscaletrue
  \def\max{79}
  \ornloop
  \hfil\par
  \xdef\ornamentheight{45pt}\xdef\ornamentwidth{}\xdef\ornamentmaxwidth{\the\dimexpr 0.9\hsize\relax}
  \the\bigorns
  \par
}
\newtoks\bigorns
\def\oneOrn#1{#1\penalty10000
    \vrule height 0.5pt width 0.5em depth 0pt\penalty10000
      \doOrnament{#1}\penalty10000%
    \vrule height 0.5pt width 0.5em depth 0pt
    \hfil\penalty0}

\def\ornloop{{\lineskiplimit=0pt\loop\ifnum\count255<\max \relax
  \ifcsname orn@skip\the\count255\endcsname\else
    \ifcsname orn@big\the\count255\OrnamentsFamily\endcsname
      \expandafter\toks0\expandafter{\expandafter\oneOrn\expandafter{\the\count255}}%
      \expandafter\expandafter\expandafter\global\expandafter\expandafter\expandafter\bigorns\expandafter\expandafter\expandafter{\expandafter\the\expandafter\bigorns\the\toks0}%
    \else
      \oneOrn{\the\count255}%
    \fi\fi
  \advance\count255 by 1
  \repeat\hfill\endgraf
}}

\def\singlecolumnvert{\pb
   \global\PaperWidth=\paperX
   \global\pdfpagewidth=\paperX 
   \global\PaperHeight=\paperY
   \global\pdfpageheight=\paperY
   \global\MarginUnit=0.5cm
   \singlecolumn
   \csname s@tupsizes\endcsname}

\SwitchOrnamentsFamily{pgfhan}
\SwitchOrnamentsFamily{vectorian}
\ptxfile{catalogue.usfm}

\bye
